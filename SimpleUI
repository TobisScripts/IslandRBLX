-- Simple UI for Buffalkor Farm
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local ToggleButton = Instance.new("TextButton")
local StatusLabel = Instance.new("TextLabel")

-- GUI Setup
ScreenGui.Parent = game.CoreGui
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Position = UDim2.new(0.5, -100, 0.4, 0)
MainFrame.Size = UDim2.new(0, 200, 0, 150)
MainFrame.Active = true
MainFrame.Draggable = true

Title.Parent = MainFrame
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "Islands: Buffalkor"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundColor3 = Color3.fromRGB(60, 0, 150)

StatusLabel.Parent = MainFrame
StatusLabel.Position = UDim2.new(0, 0, 0.7, 0)
StatusLabel.Size = UDim2.new(1, 0, 0, 30)
StatusLabel.Text = "Status: OFF"
StatusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
StatusLabel.BackgroundTransparency = 1

ToggleButton.Parent = MainFrame
ToggleButton.Position = UDim2.new(0.1, 0, 0.3, 0)
ToggleButton.Size = UDim2.new(0.8, 0, 0, 40)
ToggleButton.Text = "AUTO FARM"
ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)

-- SETTINGS
_G.FarmActive = false
local TARGET_NAME = "Buffalkor"

ToggleButton.MouseButton1Click:Connect(function()
    _G.FarmActive = not _G.FarmActive
    if _G.FarmActive then
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        StatusLabel.Text = "Status: ACTIVE"
        StatusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    else
        ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        StatusLabel.Text = "Status: OFF"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
    end
end)

-- Main Attack Loop
task.spawn(function()
    while true do
        task.wait(0.2) -- Attack speed
        if _G.FarmActive then
            pcall(function()
                local lp = game.Players.LocalPlayer
                local char = lp.Character
                local weapon = char:FindFirstChildOfClass("Tool")
                
                -- Check for mobs in the Wilderness folder (common for Islands)
                for _, mob in pairs(workspace.Wilderness:GetChildren()) do
                    if mob.Name == TARGET_NAME and mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                        local hrp = char:FindFirstChild("HumanoidRootPart")
                        local mobHrp = mob:FindFirstChild("HumanoidRootPart")
                        
                        if hrp and mobHrp and (hrp.Position - mobHrp.Position).Magnitude < 40 then
                            -- The specific Attack Remote from your dev file
                            game:GetService("ReplicatedStorage").RemoteEvents.Attack:FireServer({
                                ["entity"] = mob,
                                ["weapon"] = weapon
                            })
                        end
                    end
                end
            end)
        end
    end
end)

-- Auto-Pickup Loop
task.spawn(function()
    while true do
        task.wait(0.5)
        pcall(function()
            for _, item in pairs(workspace.DroppedItems:GetChildren()) do
                if item:IsA("BasePart") then
                    item.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                end
            end
        end)
    end
end)
